<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Jillian Camp</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Arial">
  <script src="src/validation.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function() {
            // https://dashboard.emailjs.com/admin/account
            emailjs.init('PjiNHr24zbKCgorlq');
        })();
    </script>
    <script type="text/javascript">
      function handleSubmit(event) {
      event.preventDefault();
      const form = document.getElementById('contact-form');
      const emailInput = form.querySelector('input[name="user_email"]');
      const email = emailInput.value;
      const phoneInput = form.querySelector('input[name="user_phone"]');
      const phone = phoneInput.value;
      const fnameInput = form.querySelector('input[name="user_fname"]');
      const firstname = fnameInput.value;
      const lnameInput = form.querySelector('input[name="user_lname"]');
      const lastname = lnameInput.value;
      form.contact_number.value = Math.random() * 100000 | 0;

      form.contact_number.value = Math.random() * 100000 | 0;

        emailjs.sendForm('contact_service', 'contact_form', form)
          .then(function() {
            console.log('SUCCESS!');
          })
          .catch(function(error) {
            console.log('FAILED...', error);
        });

      // If all fields are valid.... 
      if (validateEmail(email) && validatePhoneNumber(phone) && isNotNull(firstname) && isNotNull(lastname)) {
        // then proceed with sending.

        // Generate a five-digit number for the contact_number variable
        form.contact_number.value = Math.random() * 100000 | 0;

        emailjs.sendForm('contact_service', 'contact_form', form)
          .then(function() {
            console.log('SUCCESS!');
          })
          .catch(function(error) {
            console.log('FAILED...', error);
          });
          // If email is not valid
      } else if (!validateEmail(email)) {
        // Email is invalid, show an error message or take appropriate action
        console.log('Invalid email address.');
        // You can display an error message or handle it as needed
      }
        // If phone is not valid
      else if (!validatePhoneNumber(phone)) {
        console.log('Invalid phone number.');

      }
      // If first name is null
      else if (!isNotNull(lastname)){
        console.log('Last name null.');
      }

      //If last name is null 
      else if (!isNotNull(firstname)) {
        console.log('First name null.')
      }

    }
    window.onload = function() {
      document.getElementById('contact-form').addEventListener('submit', handleSubmit);
    };
  </script>
</head>
<header class="header-area">
  <!-- site-navbar start -->
  <div class="navbar-area">
    <div class="container">
      <nav class="site-navbar">
        <!-- site home -->
        <a href="https://jillsuecamp.github.io" class="site-logo">home</a>

        <!-- site menu/nav -->
        <ul>
          <li><a href="https://mwang840.github.io/">previous</a></li>
          <li><a href="/about-me.html">about</a></li>
          <li><a href="/contact.html">contact</a></li>
          <li><a href="https://kroth353.github.io/">next</a></li>
        </ul>
      </nav>
    </div>
  </div><!-- navbar-area end -->
</header>
<br>
<br>
<br>
<br>
<body style="background-color:white">
  <div class="container">
    <h1 style="color: rgb(77, 55, 47)">Contact Me âœ½</h1>
    <div class="form-group">
        <form id="contact-form">
            <input type="hidden" name="contact_number">
            <label>Last Name</label>
            <input type="text" name="user_lname">
            <label>First Name</label>
            <input type="text" name="user_fname">
            <label>Phone Number</label>
            <input type="text" name="user_phone">
            <label>Email</label>
            <input type="email" name="user_email">
            <label>Message</label>
            <textarea name="user_message"></textarea>
            <input type="submit" value="Send">
        </form>
    </div>
</body>
</html>